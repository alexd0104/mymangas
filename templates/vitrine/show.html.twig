{% extends 'base.html.twig' %}

{% block title %}Vitrine n°{{ vitrine.id }}{% endblock %}

{% block body %}
  <div class="container my-4">

    <div class="d-flex justify-content-between align-items-center mb-3">
      <h1 class="h3 mb-0">Vitrine n°{{ vitrine.id }}</h1>
      <div>
        <a class="btn btn-secondary btn-sm" href="{{ path('app_vitrine_index') }}">← Retour à la liste</a>
        <a class="btn btn-primary btn-sm" href="{{ path('app_vitrine_edit', {'id': vitrine.id}) }}">Modifier</a>
      </div>
    </div>

    <div class="card mb-4">
      <div class="card-body">
        <dl class="row mb-0">
          <dt class="col-sm-3">Description</dt>
          <dd class="col-sm-9">{{ vitrine.description }}</dd>

          <dt class="col-sm-3">Publiée</dt>
          <dd class="col-sm-9">
            {% if vitrine.publiee %}<span class="badge bg-success">Oui</span>
            {% else %}<span class="badge bg-secondary">Non</span>{% endif %}
          </dd>

          <dt class="col-sm-3">Créateur</dt>
          <dd class="col-sm-9">{{ vitrine.createur ? vitrine.createur.email : '—' }}</dd>
        </dl>
      </div>
    </div>

    <h2 class="h4 mb-3">Mangas dans cette vitrine</h2>

    {% set mangas = vitrine.mangas ?? [] %}
    {% if mangas is empty %}
      <div class="alert alert-info">Aucun manga dans cette vitrine pour le moment.</div>
    {% else %}
      <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
        {% for m in mangas %}
          <div class="col">
            <div class="card h-100 shadow-sm">
              {# ... ta carte ... #}
              <div class="card-body">
                <h5 class="card-title mb-1">{{ m.titre }}</h5>
                <p class="card-text text-muted mb-2">
                  {% if m.serie %}{{ m.serie }}{% endif %}
                  {% if m.tome %} — tome {{ m.tome }}{% endif %}
                </p>
                <a class="btn btn-outline-primary btn-sm"
                  href="{{ path('app_vitrine_manga_show', { 'vitrine_id': vitrine.id, 'manga_id': m.id }) }}">
                  Voir (public)
                </a>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% endif %}
  </div>
{% endblock %}

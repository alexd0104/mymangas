{% extends 'base.html.twig' %}
{% block title %}Éditer la vitrine{% endblock %}

{# si tu n'as pas activé le thème globalement dans twig.yaml : #}
{% form_theme form 'bootstrap_5_layout.html.twig' %}

{% block body %}
<div class="container py-4">
  <div class="row justify-content-center">
    <div class="col-lg-10 col-xl-8">
      <div class="card shadow-sm">
        <div class="card-header d-flex align-items-center justify-content-between">
          <h5 class="mb-0">Éditer la vitrine</h5>
          {% if vitrine.publiee %}
            <span class="badge text-bg-success">Publique</span>
          {% else %}
            <span class="badge text-bg-secondary">Privée</span>
          {% endif %}
        </div>

        <div class="card-body">
          {{ form_start(form) }}

          {# Description #}
          <div class="mb-3">
            {{ form_label(form.description, 'Description', {'label_attr': {'class': 'form-label fw-semibold'}}) }}
            {{ form_widget(form.description, {'attr': {'class': 'form-control', 'placeholder': 'Ex. “Vitrine privée de Alexandre”'}}) }}
            {{ form_help(form.description) }}
            {{ form_errors(form.description) }}
          </div>

          {# Publiée (switch) #}
          <div class="form-check form-switch mb-3">
            {{ form_widget(form.publiee, {'attr': {'class': 'form-check-input'}}) }}
            {{ form_label(form.publiee, 'Publiée', {'label_attr': {'class': 'form-check-label'}}) }}
            {{ form_errors(form.publiee) }}
          </div>

          {# Créateur (lecture seule) #}
          <div class="mb-3">
            {{ form_label(form.createur, 'Créateur', {'label_attr': {'class': 'form-label fw-semibold'}}) }}
            {{ form_widget(form.createur, {'attr': {'class': 'form-select', 'disabled': 'disabled'}}) }}
            <div class="form-text">Le créateur ne peut pas être modifié.</div>
            {{ form_errors(form.createur) }}
          </div>

          {# Mangas : rendu “à la main” en grille #}
          <div class="mb-2">
            <div class="fw-semibold mb-2">Mangas</div>
            <div class="row g-2">
              {% for choice in form.mangas %}
                <div class="col-12 col-sm-6 col-lg-4">
                  <div class="form-check">
                    {{ form_widget(choice, {'attr': {'class': 'form-check-input'}}) }}
                    {{ form_label(choice, null, {'label_attr': {'class': 'form-check-label'}}) }}
                  </div>
                </div>
              {% endfor %}
            </div>
            {{ form_errors(form.mangas) }}
          </div>

          <div class="d-flex gap-2 mt-4">
            <button class="btn btn-primary" type="submit">Enregistrer</button>
            <a class="btn btn-outline-secondary" href="{{ path('app_vitrine_index') }}">← Retour à la liste</a>
            {# bouton delete stylé #}
            <div class="ms-auto">
              {{ include('vitrine/_delete_form.html.twig', { button_class: 'btn btn-outline-danger' }) }}
            </div>
          </div>

          {{ form_end(form) }}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
